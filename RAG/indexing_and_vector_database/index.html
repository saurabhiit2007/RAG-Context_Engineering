
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A technical reference Retrieval Augmented Generation And Context Engineering.">
      
      
        <meta name="author" content="Saurabh Goyal">
      
      
      
        <link rel="prev" href="../retrieval_methods/">
      
      
        <link rel="next" href="../reranking/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Indexing Strategies, Vector Databases, and Retrieval Systems for RAG - RAG & Context Engineering</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="RAG &amp; Context Engineering" class="md-header__button md-logo" aria-label="RAG & Context Engineering" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RAG & Context Engineering
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Indexing Strategies, Vector Databases, and Retrieval Systems for RAG
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="lime"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/saurabhiit2007/RAG_And_Context_Engineering" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="RAG &amp; Context Engineering" class="md-nav__button md-logo" aria-label="RAG & Context Engineering" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    RAG & Context Engineering
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/saurabhiit2007/RAG_And_Context_Engineering" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Retrival Augmented Generation (RAG)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Retrival Augmented Generation (RAG)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fundamentals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fundamentals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chunking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chunking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Embedding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../retrieval_methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieval Methods
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Indexing Strategies, Vector Databases, and Retrieval Systems for RAG
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Indexing Strategies, Vector Databases, and Retrieval Systems for RAG
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-flat-index-exact-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Flat Index (Exact Search)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-approximate-nearest-neighbor-ann-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      
        3 Approximate Nearest Neighbor (ANN) Indexes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Approximate Nearest Neighbor (ANN) Indexes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hnsw-hierarchical-navigable-small-world" class="md-nav__link">
    <span class="md-ellipsis">
      
        HNSW (Hierarchical Navigable Small World)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ivf-inverted-file-index" class="md-nav__link">
    <span class="md-ellipsis">
      
        IVF (Inverted File Index)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-quantization-pq" class="md-nav__link">
    <span class="md-ellipsis">
      
        Product Quantization (PQ)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ann-index-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        ANN Index Comparison
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-sparse-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Sparse Indexes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-hybrid-indexing" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Hybrid Indexing
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-vector-databases" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Vector Databases
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-metadata-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Metadata Filtering
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-multi-tenant-rag-and-access-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Multi-Tenant RAG and Access Control
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-interview-questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Interview Questions
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reranking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Re-Ranking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced_rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced RAG
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Supporting Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Supporting Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supporting_topics/tf_idf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TF_IDF
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supporting_topics/bm25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BM25
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supporting_topics/splade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Splade
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supporting_topics/sentence_transformers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sentence Transformer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../references/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    References
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-flat-index-exact-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Flat Index (Exact Search)
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-approximate-nearest-neighbor-ann-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      
        3 Approximate Nearest Neighbor (ANN) Indexes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Approximate Nearest Neighbor (ANN) Indexes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hnsw-hierarchical-navigable-small-world" class="md-nav__link">
    <span class="md-ellipsis">
      
        HNSW (Hierarchical Navigable Small World)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ivf-inverted-file-index" class="md-nav__link">
    <span class="md-ellipsis">
      
        IVF (Inverted File Index)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#product-quantization-pq" class="md-nav__link">
    <span class="md-ellipsis">
      
        Product Quantization (PQ)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ann-index-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        ANN Index Comparison
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-sparse-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Sparse Indexes
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-hybrid-indexing" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Hybrid Indexing
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-vector-databases" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Vector Databases
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-metadata-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Metadata Filtering
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-multi-tenant-rag-and-access-control" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Multi-Tenant RAG and Access Control
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-interview-questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Interview Questions
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Indexing Strategies, Vector Databases, and Retrieval Systems for RAG</h1>

<h2 id="1-overview">1. Overview<a class="headerlink" href="#1-overview" title="Permanent link">&para;</a></h2>
<p>Indexing defines how embeddings are organised for fast similarity search at scale. The right indexing strategy depends on corpus size, latency requirements, update frequency, and memory constraints. If the retriever is the bottleneck for RAG quality, the index is what makes the retriever fast enough to use in production.</p>
<hr />
<hr />
<h2 id="2-flat-index-exact-search">2. Flat Index (Exact Search)<a class="headerlink" href="#2-flat-index-exact-search" title="Permanent link">&para;</a></h2>
<p>Computes similarity against every vector in the database. Recall is perfect by definition — no approximation.</p>
<ul>
<li><strong>Pros:</strong> Exact results; simple implementation; deterministic.</li>
<li><strong>Cons:</strong> Linear search time — O(N) per query; unusable in production for large corpora.</li>
<li><strong>Use when:</strong> Small datasets (up to ~100k vectors); offline ground-truth benchmarking; evaluating other indexes.</li>
</ul>
<hr />
<hr />
<h2 id="3-approximate-nearest-neighbor-ann-indexes">3 Approximate Nearest Neighbor (ANN) Indexes<a class="headerlink" href="#3-approximate-nearest-neighbor-ann-indexes" title="Permanent link">&para;</a></h2>
<p>ANN indexes trade a small accuracy loss for large performance gains. The two dominant approaches are HNSW and IVF.</p>
<h3 id="hnsw-hierarchical-navigable-small-world">HNSW (Hierarchical Navigable Small World)<a class="headerlink" href="#hnsw-hierarchical-navigable-small-world" title="Permanent link">&para;</a></h3>
<p>Builds a multi-layer graph where each node connects to similar vectors. Search starts at higher (coarser) layers and progressively refines through lower (finer) layers. The "navigable small world" property ensures short paths between any two nodes in the graph.</p>
<p><strong>How it works:</strong></p>
<ul>
<li>During indexing, each new vector is inserted into multiple layers, with connections to its nearest neighbours at each layer.</li>
<li>During search, the algorithm enters at the top layer (fewest nodes), greedily navigates to the nearest centroid, then descends layer by layer for increasing refinement.</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Pros</strong></td>
<td>Very high recall at low latency; supports dynamic insertion without full rebuild; tunable recall/speed tradeoff</td>
</tr>
<tr>
<td><strong>Cons</strong></td>
<td>High memory overhead from graph edges (typically 2–8x raw vector storage); slow build on very large datasets</td>
</tr>
<tr>
<td><strong>Best for</strong></td>
<td>Latency-sensitive RAG; medium-to-large corpora; frequently updated data</td>
</tr>
</tbody>
</table>
<p><strong>Key parameters:</strong></p>
<ul>
<li><code>M</code> — number of connections per node. Higher M → better recall, more memory.</li>
<li><code>ef_construction</code> — search width during index build. Higher → better index quality, slower build.</li>
<li><code>ef_search</code> — search width at query time. Higher → better recall, slower queries.</li>
</ul>
<hr />
<h3 id="ivf-inverted-file-index">IVF (Inverted File Index)<a class="headerlink" href="#ivf-inverted-file-index" title="Permanent link">&para;</a></h3>
<p>Clusters all vectors into <code>n_list</code> centroid clusters at build time. At query time, only the <code>n_probe</code> closest cluster centroids are searched.</p>
<p><strong>Analogy to classical inverted index:</strong> Instead of <code>term → documents</code>, IVF uses <code>centroid ID → vectors assigned to that centroid</code>. Only vectors in the probed clusters are evaluated.</p>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Pros</strong></td>
<td>Lower memory than HNSW; faster to build; disk-backed search feasible</td>
</tr>
<tr>
<td><strong>Cons</strong></td>
<td>Lower recall than HNSW if relevant vectors fall outside probed clusters; sensitive to clustering quality</td>
</tr>
<tr>
<td><strong>Best for</strong></td>
<td>Very large datasets; cost-constrained or memory-constrained systems</td>
</tr>
</tbody>
</table>
<p><strong>Key parameters:</strong></p>
<ul>
<li><code>n_list</code> — number of clusters. More clusters → higher precision but longer build time.</li>
<li><code>n_probe</code> — number of clusters searched at query time. More probes → higher recall, slower queries.</li>
</ul>
<hr />
<h3 id="product-quantization-pq">Product Quantization (PQ)<a class="headerlink" href="#product-quantization-pq" title="Permanent link">&para;</a></h3>
<p>Compresses high-dimensional vectors into compact codes by splitting each vector into sub-vectors and quantising each sub-vector independently using a trained codebook.</p>
<ul>
<li><strong>Pros:</strong> Massive memory reduction — enables storage of billions of vectors; lower I/O cost.</li>
<li><strong>Cons:</strong> Lossy compression — recall drops due to quantisation errors; harder to debug.</li>
<li><strong>Typically combined with:</strong> IVF+PQ for extreme-scale search (e.g., web-scale retrieval).</li>
</ul>
<hr />
<h3 id="ann-index-comparison">ANN Index Comparison<a class="headerlink" href="#ann-index-comparison" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Index</th>
<th>Recall</th>
<th>Query Speed</th>
<th>Memory</th>
<th>Update Support</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td>Flat (exact)</td>
<td>Perfect</td>
<td>Slow (linear)</td>
<td>Low</td>
<td>Easy</td>
<td>Ground truth, small datasets</td>
</tr>
<tr>
<td>HNSW</td>
<td>Very high</td>
<td>Very fast</td>
<td>High</td>
<td>Easy (dynamic)</td>
<td>Production RAG, latency-sensitive</td>
</tr>
<tr>
<td>IVF</td>
<td>High</td>
<td>Fast</td>
<td>Medium</td>
<td>Requires rebuild</td>
<td>Large scale, memory-constrained</td>
</tr>
<tr>
<td>IVF+PQ</td>
<td>Moderate</td>
<td>Very fast</td>
<td>Very low</td>
<td>Requires rebuild</td>
<td>Billion-scale search</td>
</tr>
<tr>
<td>Sparse (BM25)</td>
<td>High (lexical)</td>
<td>Very fast</td>
<td>Low</td>
<td>Easy</td>
<td>Keyword search, hybrid RAG</td>
</tr>
</tbody>
</table>
<hr />
<hr />
<h2 id="4-sparse-indexes">4. Sparse Indexes<a class="headerlink" href="#4-sparse-indexes" title="Permanent link">&para;</a></h2>
<p>Sparse indexes use term-based inverted indexes mapping <code>term → posting list of documents</code>. Standard infrastructure for BM25 and SPLADE. Implemented in Elasticsearch, OpenSearch, and Lucene.</p>
<ul>
<li><strong>Excellent for:</strong> Lexical retrieval; exact keyword matches; rare terms and identifiers.</li>
<li><strong>Cannot do:</strong> Semantic similarity; paraphrase matching.</li>
</ul>
<hr />
<hr />
<h2 id="5-hybrid-indexing">5. Hybrid Indexing<a class="headerlink" href="#5-hybrid-indexing" title="Permanent link">&para;</a></h2>
<p>Hybrid systems maintain both a dense vector index and a sparse inverted index. Retrieval runs in parallel across both, and results are merged (typically with Reciprocal Rank Fusion).</p>
<ul>
<li><strong>Pros:</strong> Improved recall and precision; robust to diverse query types; production-proven.</li>
<li><strong>Cons:</strong> Increased system complexity; higher latency (two retrieval paths); requires score fusion tuning.</li>
</ul>
<hr />
<hr />
<h2 id="6-vector-databases">6. Vector Databases<a class="headerlink" href="#6-vector-databases" title="Permanent link">&para;</a></h2>
<p>Vector databases manage embedding storage, indexing, ANN search, metadata filtering, and scaling in a unified system. Key selection criteria: index type support, metadata filtering capabilities, update model, latency guarantees, and operational overhead.</p>
<table>
<thead>
<tr>
<th>Database</th>
<th>Key Strength</th>
<th>Consideration</th>
</tr>
</thead>
<tbody>
<tr>
<td>FAISS (Meta)</td>
<td>Extremely flexible, high-performance, research standard</td>
<td>Not a full DB — needs extra engineering for production</td>
</tr>
<tr>
<td>Milvus</td>
<td>Distributed, scalable, multiple index types</td>
<td>High operational complexity</td>
</tr>
<tr>
<td>Qdrant</td>
<td>Strong metadata filtering, RAG-optimised, simple to operate</td>
<td>Less ecosystem than FAISS</td>
</tr>
<tr>
<td>Pinecone</td>
<td>Fully managed, zero ops overhead, consistent performance</td>
<td>Limited internal control; cost scales quickly</td>
</tr>
<tr>
<td>Weaviate</td>
<td>Strong hybrid search (dense + BM25 built-in)</td>
<td>More complex query interface</td>
</tr>
<tr>
<td>pgvector</td>
<td>Postgres extension — no new infrastructure needed</td>
<td>Lower performance at large scale</td>
</tr>
</tbody>
</table>
<hr />
<hr />
<h2 id="7-metadata-filtering">7. Metadata Filtering<a class="headerlink" href="#7-metadata-filtering" title="Permanent link">&para;</a></h2>
<p>Metadata filtering restricts retrieval to relevant subsets before (pre-filtering) or after (post-filtering) vector search.</p>
<p><strong>Pre-filtering</strong> (filter first, then search the smaller set):</p>
<ul>
<li>Faster — ANN search runs on a smaller index.</li>
<li>Risk: over-filtering can hurt recall if filters are too strict.</li>
</ul>
<p><strong>Post-filtering</strong> (search first, then discard irrelevant results):</p>
<ul>
<li>Better recall — the full index is searched.</li>
<li>Wastes compute on candidates that will be filtered out.</li>
</ul>
<p><strong>Common metadata filters:</strong></p>
<ul>
<li>Document type or source</li>
<li>Timestamp / version (retrieve only recent documents)</li>
<li>Author or department</li>
<li>Access permissions / tenant ID (multi-tenant RAG)</li>
<li>Content type (prose vs. table vs. code)</li>
</ul>
<blockquote>
<p>Metadata filtering is one of the highest-ROI improvements in a vanilla RAG system — it narrows the search space without changing the embedding model or retraining anything.</p>
</blockquote>
<hr />
<hr />
<h2 id="8-multi-tenant-rag-and-access-control">8. Multi-Tenant RAG and Access Control<a class="headerlink" href="#8-multi-tenant-rag-and-access-control" title="Permanent link">&para;</a></h2>
<p>In enterprise systems, different users should only retrieve from their permitted document subset. Two main approaches:</p>
<ol>
<li><strong>Namespace / collection isolation:</strong> Each tenant's documents live in a separate index namespace. Cleanest isolation but higher infrastructure cost.</li>
<li><strong>Metadata-based filtering:</strong> All documents share one index; retrieval filters on a <code>tenant_id</code> metadata field. More efficient but relies on the vector DB correctly enforcing filters.</li>
</ol>
<hr />
<hr />
<h2 id="9-interview-questions">9. Interview Questions<a class="headerlink" href="#9-interview-questions" title="Permanent link">&para;</a></h2>
<p><strong>Q: What is the key trade-off between HNSW and IVF?</strong></p>
<p>A: HNSW gives higher recall and faster queries but uses significantly more memory (graph edges) and is slower to build. IVF uses less memory and builds faster but can miss relevant vectors that fall outside the probed clusters, giving lower recall. For latency-sensitive RAG with frequent updates, HNSW is usually preferred. For very large datasets where memory is a constraint, IVF (often with PQ compression) is used.</p>
<hr />
<p><strong>Q: When would you re-index your vector database?</strong></p>
<p>A: You must re-index whenever you change the embedding model — vectors from different models live in different vector spaces and cannot be compared. You should also re-index when the corpus changes significantly (documents added/deleted), when chunk size or preprocessing changes, or when switching to an index type that requires a full rebuild (like IVF).</p>
<hr />
<p><strong>Q: How does metadata filtering interact with ANN search?</strong></p>
<p>A: Pre-filtering (filter before ANN search) is faster because you search a smaller set, but can hurt recall if filters are too aggressive. Post-filtering (run ANN then filter results) preserves recall but wastes compute. Some vector databases (like Qdrant) support segment-level filtering that approximates pre-filtering without the recall penalty.</p>
<hr />
<p><strong>Q: What are the main operational differences between FAISS and a managed vector DB like Pinecone?</strong></p>
<p>A: FAISS is a library — extremely flexible and high-performance, but you are responsible for persistence, serving, scaling, replication, and monitoring. Pinecone is a fully managed service with consistent performance, automatic scaling, and no operational overhead, but you have less control over internals (index type, tuning parameters) and costs scale quickly with data volume. For research or highly custom pipelines, FAISS is better. For product teams that want to ship quickly, managed databases like Pinecone or Qdrant are preferable.</p>
<hr />
<p><strong>Q: How would you design a RAG system for a multi-tenant SaaS application where each customer should only retrieve their own documents?</strong></p>
<p>A: Two main options: (1) Namespace isolation — each customer gets a separate collection/namespace in the vector DB. Strong security guarantees, but higher cost at large customer counts. (2) Metadata filtering — store all documents in one index with a <code>tenant_id</code> field, and always filter on tenant_id at query time. More efficient, but you must trust the vector DB's filter enforcement and ensure no metadata leakage. For high-security requirements (e.g., healthcare, finance), namespace isolation is safer.</p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.expand", "navigation.top", "search.highlight", "search.share", "content.code.copy", "mathjax"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>