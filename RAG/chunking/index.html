
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A technical reference Retrieval Augmented Generation And Context Engineering.">
      
      
        <meta name="author" content="Saurabh Goyal">
      
      
      
        <link rel="prev" href="../fundamentals/">
      
      
        <link rel="next" href="../embedding/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Chunking - RAG & Context Engineering</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="RAG &amp; Context Engineering" class="md-header__button md-logo" aria-label="RAG & Context Engineering" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RAG & Context Engineering
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Chunking
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="deep-purple"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="lime"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/saurabhiit2007/RAG_And_Context_Engineering" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="RAG &amp; Context Engineering" class="md-nav__button md-logo" aria-label="RAG & Context Engineering" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    RAG & Context Engineering
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/saurabhiit2007/RAG_And_Context_Engineering" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Retrival Augmented Generation (RAG)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Retrival Augmented Generation (RAG)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fundamentals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fundamentals
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Chunking
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Chunking
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-why-chunks-must-be-sized-carefully" class="md-nav__link">
    <span class="md-ellipsis">
      
        2 Why Chunks Must Be Sized Carefully
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-chunking-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Chunking Strategies
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Chunking Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixed-size-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fixed-Size Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sentence-based-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sentence-Based Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paragraph-based-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paragraph-Based Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recursive-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recursive Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semantic-context-aware-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic / Context-Aware Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sliding-window-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sliding Window Chunking
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-chunk-size-and-top-k-are-coupled" class="md-nav__link">
    <span class="md-ellipsis">
      
        4 Chunk Size and Top-k Are Coupled
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-chunk-overlap" class="md-nav__link">
    <span class="md-ellipsis">
      
        5 Chunk Overlap
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-chunk-metadata-and-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        6 Chunk Metadata and Filtering
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-special-cases-tables-and-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        7 Special Cases: Tables and Code
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-adaptive-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        8 Adaptive Chunking
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-interview-questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        9 Interview Questions
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Embedding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../retrieval_methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Retrieval Methods
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../indexing_and_vector_database/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Indexing Strategies, Vector Databases, and Retrieval Systems for RAG
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reranking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Re-Ranking
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced_rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced RAG
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evaluation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quick_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_10" >
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Supporting Concepts
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            
  
    Supporting Concepts
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supporting_topics/tf_idf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TF_IDF
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supporting_topics/bm25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    BM25
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supporting_topics/splade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Splade
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supporting_topics/sentence_transformers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sentence Transformer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../references/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    References
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-why-chunks-must-be-sized-carefully" class="md-nav__link">
    <span class="md-ellipsis">
      
        2 Why Chunks Must Be Sized Carefully
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-chunking-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Chunking Strategies
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Chunking Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fixed-size-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Fixed-Size Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sentence-based-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sentence-Based Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#paragraph-based-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Paragraph-Based Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recursive-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Recursive Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semantic-context-aware-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Semantic / Context-Aware Chunking
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sliding-window-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sliding Window Chunking
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-chunk-size-and-top-k-are-coupled" class="md-nav__link">
    <span class="md-ellipsis">
      
        4 Chunk Size and Top-k Are Coupled
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-chunk-overlap" class="md-nav__link">
    <span class="md-ellipsis">
      
        5 Chunk Overlap
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-chunk-metadata-and-filtering" class="md-nav__link">
    <span class="md-ellipsis">
      
        6 Chunk Metadata and Filtering
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-special-cases-tables-and-code" class="md-nav__link">
    <span class="md-ellipsis">
      
        7 Special Cases: Tables and Code
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-adaptive-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      
        8 Adaptive Chunking
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-interview-questions" class="md-nav__link">
    <span class="md-ellipsis">
      
        9 Interview Questions
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Chunking</h1>

<h2 id="1-overview">1. Overview<a class="headerlink" href="#1-overview" title="Permanent link">&para;</a></h2>
<p>Chunking splits documents into smaller units before embedding and indexing. It is a critical design choice because it directly determines retrieval granularity, context relevance, latency, and cost. Poor chunking is one of the easiest ways to silently break a RAG system.</p>
<hr />
<hr />
<h2 id="2-why-chunks-must-be-sized-carefully">2 Why Chunks Must Be Sized Carefully<a class="headerlink" href="#2-why-chunks-must-be-sized-carefully" title="Permanent link">&para;</a></h2>
<p>Embedding models have fixed input limits (typically 512 to 8192 tokens), so documents must be split. But chunk size affects quality in both directions:</p>
<ul>
<li><strong>Too small:</strong> Chunks lose semantic meaning; retrieval returns fragments that don't fully answer the question.</li>
<li><strong>Too large:</strong> Chunks contain multiple unrelated topics; embedding quality degrades; context window fills with noise.</li>
</ul>
<hr />
<hr />
<h2 id="3-chunking-strategies">3. Chunking Strategies<a class="headerlink" href="#3-chunking-strategies" title="Permanent link">&para;</a></h2>
<h3 id="fixed-size-chunking">Fixed-Size Chunking<a class="headerlink" href="#fixed-size-chunking" title="Permanent link">&para;</a></h3>
<p>Documents are split into consecutive windows of N tokens with optional overlap. Simple and fast, but ignores semantic boundaries.</p>
<p><strong>Algorithm:</strong>
1. Tokenise the document.
2. Split into consecutive windows of size N.
3. Optionally overlap adjacent windows by M tokens.</p>
<ul>
<li><strong>Pros:</strong> Simple to implement; fast and scalable; good baseline.</li>
<li><strong>Cons:</strong> Ignores semantic boundaries; may split sentences mid-thought.</li>
<li><strong>Use when:</strong> Baseline systems; uniform document formats; large-scale indexing where simplicity matters.</li>
</ul>
<hr />
<h3 id="sentence-based-chunking">Sentence-Based Chunking<a class="headerlink" href="#sentence-based-chunking" title="Permanent link">&para;</a></h3>
<p>Documents are split at sentence boundaries, accumulating sentences until a token threshold is reached.</p>
<ul>
<li><strong>Pros:</strong> Preserves sentence semantics; reduces mid-sentence splits.</li>
<li><strong>Cons:</strong> Sentence lengths vary; ignores higher-level document structure.</li>
<li><strong>Use when:</strong> Narrative text; QA over articles or reports.</li>
</ul>
<hr />
<h3 id="paragraph-based-chunking">Paragraph-Based Chunking<a class="headerlink" href="#paragraph-based-chunking" title="Permanent link">&para;</a></h3>
<p>Chunks are formed at paragraph boundaries and merged if small; large paragraphs are split further if needed.</p>
<ul>
<li><strong>Pros:</strong> Preserves local topical coherence; aligns with human-written structure.</li>
<li><strong>Cons:</strong> Paragraph length is highly inconsistent; formatting noise can affect quality.</li>
<li><strong>Use when:</strong> Well-structured documentation; markdown or HTML content.</li>
</ul>
<hr />
<h3 id="recursive-chunking">Recursive Chunking<a class="headerlink" href="#recursive-chunking" title="Permanent link">&para;</a></h3>
<p>Applies a hierarchy of split rules — sections → paragraphs → sentences → fixed-size fallback — only falling back to finer splits when the chunk exceeds the size limit.</p>
<ul>
<li><strong>Pros:</strong> Preserves document structure; produces semantically meaningful chunks; handles diverse formats.</li>
<li><strong>Cons:</strong> More complex to implement; requires reliable document parsing.</li>
<li><strong>Use when:</strong> Enterprise documents; PDFs with headings; mixed-format content. <strong>This is the most common production approach.</strong></li>
</ul>
<hr />
<h3 id="semantic-context-aware-chunking">Semantic / Context-Aware Chunking<a class="headerlink" href="#semantic-context-aware-chunking" title="Permanent link">&para;</a></h3>
<p>Adjacent text units are grouped based on embedding similarity rather than fixed boundaries.</p>
<ul>
<li><strong>Pros:</strong> High semantic coherence; reduces context fragmentation.</li>
<li><strong>Cons:</strong> Computationally expensive — requires embedding during preprocessing; sensitive to similarity thresholds.</li>
<li><strong>Use when:</strong> High-precision RAG; smaller corpora where quality matters most.</li>
</ul>
<hr />
<h3 id="sliding-window-chunking">Sliding Window Chunking<a class="headerlink" href="#sliding-window-chunking" title="Permanent link">&para;</a></h3>
<p>Overlapping windows slide across the document (e.g., 512-token window, 256-token stride).</p>
<ul>
<li><strong>Pros:</strong> Preserves cross-boundary context; reduces information loss at chunk edges.</li>
<li><strong>Cons:</strong> Doubles or more the index size; higher storage and retrieval cost; redundant embeddings.</li>
<li><strong>Use when:</strong> Long-form documents; multi-hop reasoning tasks; cases where boundary loss is critical.</li>
</ul>
<hr />
<hr />
<h2 id="4-chunk-size-and-top-k-are-coupled">4 Chunk Size and Top-k Are Coupled<a class="headerlink" href="#4-chunk-size-and-top-k-are-coupled" title="Permanent link">&para;</a></h2>
<p>Changing chunk size almost always requires adjusting top-k. <strong>They must be tuned jointly.</strong></p>
<table>
<thead>
<tr>
<th>Chunk Size</th>
<th>Typical Top-k</th>
<th>Behaviour</th>
</tr>
</thead>
<tbody>
<tr>
<td>Small (100–300 tokens)</td>
<td>High (10–20)</td>
<td>High recall, lower precision — many fragments retrieved</td>
</tr>
<tr>
<td>Medium (300–700 tokens)</td>
<td>Medium (4–8)</td>
<td>Balanced — good default starting point</td>
</tr>
<tr>
<td>Large (700–1500 tokens)</td>
<td>Low (1–3)</td>
<td>High precision, risk of missing relevant info</td>
</tr>
</tbody>
</table>
<p><strong>Common failure patterns:</strong></p>
<ul>
<li>Small chunks + low top-k → missing required information</li>
<li>Large chunks + high top-k → context overload and noise</li>
<li>Large chunks + low top-k → partial coverage</li>
</ul>
<hr />
<hr />
<h2 id="5-chunk-overlap">5 Chunk Overlap<a class="headerlink" href="#5-chunk-overlap" title="Permanent link">&para;</a></h2>
<p>Overlap (sharing tokens between adjacent chunks) prevents information loss at chunk boundaries.</p>
<p><strong>Typical settings:</strong></p>
<ul>
<li>Fixed-size chunking: 10–20% overlap</li>
<li>Sliding window: stride equals 50% of window size</li>
<li>Recursive chunking: overlap often unnecessary</li>
</ul>
<p><strong>Benefits:</strong> Improved recall; reduced boundary effects.
<strong>Costs:</strong> Larger index; higher storage and retrieval cost; redundant embeddings.</p>
<blockquote>
<p>Overlap is a mitigation strategy, not a substitute for good chunking design.</p>
</blockquote>
<hr />
<hr />
<h2 id="6-chunk-metadata-and-filtering">6 Chunk Metadata and Filtering<a class="headerlink" href="#6-chunk-metadata-and-filtering" title="Permanent link">&para;</a></h2>
<p>Attaching structured metadata to each chunk enables filtering before or after similarity search — one of the highest-ROI improvements in a vanilla RAG system.</p>
<p><strong>Common metadata fields:</strong> document ID, section heading, timestamp/version, author, content type, access permissions.</p>
<p><strong>How it's used:</strong></p>
<ul>
<li>Pre-filter by document type, date, or access permission before ANN search (faster, but risks reducing recall if over-filtered).</li>
<li>Post-filter after ANN search (preserves recall, wastes compute on irrelevant candidates).</li>
</ul>
<p><strong>Example:</strong> Retrieve only chunks from documents created after a certain date, or from a specific product version.</p>
<hr />
<hr />
<h2 id="7-special-cases-tables-and-code">7 Special Cases: Tables and Code<a class="headerlink" href="#7-special-cases-tables-and-code" title="Permanent link">&para;</a></h2>
<p>Text-centric chunking destroys the structure of tables and source code.</p>
<p><strong>Tables:</strong></p>
<ul>
<li>Never split a table row across chunks.</li>
<li>Attach the table schema and column headers as metadata to every row-chunk.</li>
<li>Consider serialising rows to natural language for embedding.</li>
</ul>
<p><strong>Code:</strong></p>
<ul>
<li>Chunk at function or class boundaries — never split a function across chunks.</li>
<li>File-level chunking for small files is acceptable.</li>
<li>Long-range dependencies mean that smaller granularity (line-level) loses context.</li>
</ul>
<hr />
<hr />
<h2 id="8-adaptive-chunking">8 Adaptive Chunking<a class="headerlink" href="#8-adaptive-chunking" title="Permanent link">&para;</a></h2>
<p>Different queries require different granularity. A single static chunking strategy cannot optimally serve all query types.</p>
<table>
<thead>
<tr>
<th>Query Type</th>
<th>Preferred Chunking</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fact lookup</td>
<td>Small chunks</td>
</tr>
<tr>
<td>Concept explanation</td>
<td>Medium chunks</td>
</tr>
<tr>
<td>Procedural steps</td>
<td>Large chunks</td>
</tr>
<tr>
<td>Multi-hop reasoning</td>
<td>Overlapping or sliding window</td>
</tr>
</tbody>
</table>
<p><strong>Adaptive approach:</strong> Maintain multiple indexes with different chunk sizes and select based on query classification. Higher accuracy, but more system complexity.</p>
<hr />
<hr />
<h2 id="9-interview-questions">9 Interview Questions<a class="headerlink" href="#9-interview-questions" title="Permanent link">&para;</a></h2>
<p><strong>Q: How do you choose the right chunk size?</strong></p>
<p>A: Consider three factors: (1) the embedding model's effective range — some models degrade with very long inputs; (2) the user's query style — short factual queries need small chunks, summary queries need larger ones; (3) the "lost in the middle" phenomenon — LLMs often miss information buried in the middle of long context windows. Start with medium chunks (400–600 tokens) and evaluate retrieval recall before optimising.</p>
<hr />
<p><strong>Q: What is the "lost in the middle" problem?</strong></p>
<p>A: LLMs tend to pay more attention to content at the beginning and end of their context window, and less to content in the middle. This means that if you inject many large chunks into the prompt, relevant information buried in the middle may be ignored. Solutions include re-ordering retrieved chunks (most relevant first/last) and using smaller chunks with higher top-k.</p>
<hr />
<p><strong>Q: Why is overlap used, and what are its costs?</strong></p>
<p>A: Overlap ensures that information near chunk boundaries appears in at least one chunk in its full context. The cost is index bloat: overlapping chunks produce redundant embeddings, increasing storage and retrieval compute. Overlap is a safety net, not a primary strategy.</p>
<hr />
<p><strong>Q: How would you chunk a large PDF with tables and diagrams?</strong></p>
<p>A: Parse the PDF with a structure-aware tool to extract text, tables, and metadata separately. Chunk the text recursively. Serialise tables (e.g., to CSV or natural language rows) and attach the table schema as metadata. For diagrams, use a vision model to generate textual descriptions, then chunk those. Tag each chunk with its source section and content type for filtered retrieval.</p>
<hr />
<p><strong>Q: What happens if you use the wrong chunk size for your embedding model?</strong></p>
<p>A: If chunks exceed the model's effective input window, the encoder either truncates them (losing information) or the quality of the embedding degrades because the model cannot attend properly to all tokens. If chunks are much smaller than what the model is trained on, you lose context and the embedding may not capture full meaning. Always check your embedding model's recommended input range.</p>
<hr />












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.expand", "navigation.top", "search.highlight", "search.share", "content.code.copy", "mathjax"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>